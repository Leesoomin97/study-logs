# 1. 머리말

U-Net은 Encoder-Decoder 구조와 Skip Connection을 통해 해상도를 복원하여 의료, 산업 분야에서 우수한 성능을 보여줬다.

그러나 실제 Scene 기반의 복잡한 이미지에서는 다음과 같은 한계가 존재한다.

- 해상도를 복원해도 넓은 맥락(context)을 충분히 반영하기 어렵고  
- Downsampling이 반복될수록 작은 객체는 사라지기 쉽고  
- 해상도 상실 없이 receptive field를 확장해야 하는 요구가 증가했다.

DeepLab 시리즈는 이러한 문제를 해결하기 위해 등장한 Segmentation 모델로, Dilated Convolution과 ASPP을 중심으로 발전해 왔다.

이 글에서는 DeepLab의 핵심 개념, 모델 구조, 시리즈별 발전 과정, 그리고 실무 적용 예시를 기술적으로 정리한다.

---

# 2. DeepLab의 핵심 개념

DeepLab은 해상도 손실 없이 receptive field를 확장하고, 다중 스케일 객체에 대한 강한 대응을 하고자 하는 기술 목표를 가지고 있다. 이에 DeepLab은 Atrous Convolution과 ASPP라는 두 가지의 중심 철학을 가지고 있다.

두 개념은 DeepLab 시리즈의 기반이 된다.

## (1) Atrous (Dilated) Convolution

Dilated convolution은 필터의 커널 사이에 간격(dilation rate)을 두어 해상도를 줄이지 않고 receptive field를 늘릴 수 있는 연산이다.

기존 Conv와 비교하면 다음과 같다.

| 연산              | Stride | Output 해상도 | Receptive Field | 비고               |
|------------------|--------|----------------|------------------|--------------------|
| 일반 Conv        | 1      | 유지           | 작음             | 기본 CNN 구조      |
| MaxPool/Stride Conv | 2   | 감소           | 증가             | 해상도 손실 발생   |
| Dilated Conv     | 1      | 유지           | 크게 증가        | DeepLab 핵심 연산  |

DeepLab이 목표로 하는 **해상도 유지 + 맥락 확대** 문제는 Dilated Conv가 가장 효율적으로 해결한다. 즉, Downsampling 없이 넓은 영역을 관찰할 수 있는 구조가 된다.

## (2) ASPP(Atrous Spatial Pyramid Pooling)

객체의 크기가 다양해질수록 하나의 dilation rate로는 대응이 어렵다. ASPP는 다음과 같은 방식으로 문제를 해결한다.

- 서로 다른 dilation rate를 병렬로 적용  
- image-level pooling으로 global context 추가  
- 병렬 출력값을 concat하여 multi-scale feature map 생성  

결과적으로 DeepLab은 작은 객체, 큰 객체, 배경 문맥 모두에 강한 구조를 갖게 된다.

---

# 3. DeepLab의 기본 구조

## (1) 전체적 흐름

DeepLab의 전체 흐름은 다음과 같이 요약할 수 있다.

[Backbone → Dilated Blocks → ASPP → Decoder(선택적) → Segmentation Map]


## (2) 주요 구성 요소

### ① Backbone
- 일반적으로 ResNet, Xception 등이 주로 사용된다.
- Stride 단계를 줄이고, dilated convolution으로 대체하여 해상도를 유지한다.

### ② Dilated Convolution Blocks
- 깊은 레이어에서 dilation rate가 증가한다.
- Downsampling 없이 receptive field를 확장한다.

### ③ ASPP Module
- 서로 다른 dilation rate로 병렬 conv를 구성한다.
- image pooling를 포함한다.
- multi-scale feature 학습의 핵심 모듈이다.

### ④ Decoder (DeepLab v3+ 이후)
- low-level feature와 결합하여 경계 정보를 복원한다.
- U-Net의 장점을 접목한 구조이다. (U-Net 식 boundary 복원)

### ⑤ Prediction Head
- 1×1 conv로 upsampling을 적용한다.
- 최종적으로 pixel-wise probability map을 생성한다.

---

# 4. DeepLab 시리즈 발전 과정

## (1) DeepLab v1 (2014)

### ① 특징
- Abtrous convolution을 최초 도입하였다.
- Fully Connected CRF를 후처리로 사용하여 경계를 개선했다.

### ② 장점
- 해상도를 유지함과 동시에 넓은 receptive field를 확보하였다.
- CRF 덕분에 기존 FCN 대비 boundary sharpness가 향상되었다.

### ③ 한계
- CRF가 별도 모듈이어서 End-to-End 학습이 불가능하다.
- multi-scale 처리가 부족하다.
- 연산량이 증가했다.

---

## (2) DeepLab v2 (2016)

### ① 특징
- ASPP을 처음으로 도입하였다.
- 다양한 dilation rate를 병렬 적용하였다.

### ② 장점
- multi-scale 대응 능력이 강화되었다.
- 대형 객체, 소형 객체를 동시에 학습하는 것이 가능해졌다.
- v1 대비 성능이 향상되었다.

### ③ 한계
- Decoder의 부재로 인하여 경계 품질이 여전히 낮았다.
- ASPP 자체의 연산량에 부담이 있었다.

---

## (3) DeepLab v3 (2017)

### ① 특징
- ASPP이 강화되었으며 image-level pooling이 추가되었다.
- dilation rate 조합이 최적화되었다.

### ② 장점
- global context의 활용이 가능해졌다.
- CRF 없이도 품질을 유지할 수 있다.

### ③ 단점
- Decoder가 없어 boundary 정확도에 여전히 제한이 존재했다.
- 고해상도 feature map으로 인하여 메모리에 부담이 있다.

---

## (4) DeepLab v3+ (2018)

### ① 특징
- Decoder 모듈이 본격적으로 도입되었다.
- U-Net의 장점을 도입하여 low-level feature와 결합하였다.
- Xception backbone을 적용하였다.

### ② 장점
- boundary recovery가 크게 향상되었다.
- multi-scale을 다룰 수 있게 되었으며, 고해상도 복원 구조가 완성되었다.
- 실무에서 가장 널리 사용되는 버전이다.

### ③ 한계
- 구조가 복잡해졌다.
- 실시간 처리 환경에서는 연산량이 부담된다.

---

# 5. DeepLab의 실무 활용 분야

| 분야           | 활용 예시               | DeepLab이 강한 이유                      |
|----------------|-------------------------|------------------------------------------|
| 자율주행       | 도로, 차선, 인도, 배경 분리 | 넓은 context + 객체/배경 구분            |
| 의료 영상      | 병변, 장기 segmentation | boundary 복원 + multi-scale 대응         |
| 위성 영상 분석 | 건물/도로/토지 피복     | global context 필요                      |
| 산업 품질 검사 | 반도체/기판 결함 탐지   | 미세 결함 유지 + dilated conv           |
| 로보틱스       | 실내 공간 이해          | 영역/경계 정보 균형                      |

---

# 6. U-Net과 DeepLab 비교

| 항목            | U-Net                         | DeepLab                          |
|----------------|-------------------------------|----------------------------------|
| 구조           | Encoder-Decoder + Skip        | Dilated Conv + ASPP + Decoder   |
| 강점           | 경계 복원, 저층 feature 활용 | multi-scale global context       |
| receptive field | 제한적                        | 매우 큼                           |
| 해상도 처리     | Upsampling 중심               | 해상도 유지(dilated)            |
| 적합 분야       | 의료, 제조 검사               | 자율 주행, 위성, 복잡한 scene   |

U-Net은 미세 경계, 정밀 구조에 강한 반면, DeepLab은 복잡한 장면, 다중 스케일 구조에 강하다.

---

# 7. 마무리

DeepLab은 해상도를 잃지 않으면서 receptive field를 확장하여 Segmentation의 핵심 기술 문제를 해결했다.

ASPP를 통한 다중 스케일 대응과 Decoder 기반 경계 복원 기능은 오늘날의 Segmentation 모델 대부분이 채택한 기본 구조로 발전했다.

DeepLabv3+는 특히 실무에서 널리 사용되는 안정적 구조이며, 최근의 Transformer 기반 모델(Mask2Former 등)에서도 ASPP-like multi-scale aggregation이 그대로 계승되고 있다.
